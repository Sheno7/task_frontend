{"ast":null,"code":"import _regeneratorRuntime from \"/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/src/middleware/AuthMiddleware.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nexport default function AuthMiddleware(ComponentToProtect, props) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(Test, _Component);\n\n      function Test() {\n        var _this;\n\n        _classCallCheck(this, Test);\n\n        console.log(ComponentToProtect);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Test).call(this));\n        _this.state = {\n          loading: true,\n          redirect: false\n        };\n        return _this;\n      }\n\n      _createClass(Test, [{\n        key: \"componentDidMount\",\n        value: function () {\n          var _componentDidMount = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee() {\n            var result;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return axios.post(process.env.REACT_APP_ADMIN_URL + '/checktoken');\n\n                  case 3:\n                    result = _context.sent;\n                    _context.next = 9;\n                    break;\n\n                  case 6:\n                    _context.prev = 6;\n                    _context.t0 = _context[\"catch\"](0);\n                    return _context.abrupt(\"return\", this.props.history.push('/admin/login'));\n\n                  case 9:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this, [[0, 6]]);\n          }));\n\n          function componentDidMount() {\n            return _componentDidMount.apply(this, arguments);\n          }\n\n          return componentDidMount;\n        }()\n      }, {\n        key: \"render\",\n        value: function render() {\n          return React.createElement(ComponentToProtect, Object.assign({}, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 23\n            },\n            __self: this\n          }));\n        }\n      }]);\n\n      return Test;\n    }(Component)\n  );\n}","map":{"version":3,"sources":["/media/shenouda/81422b19-5e63-467f-9a2d-c5ca5ac074ba/work/learning/istrahti/frontend/src/middleware/AuthMiddleware.js"],"names":["React","Component","axios","AuthMiddleware","ComponentToProtect","props","console","log","state","loading","redirect","post","process","env","REACT_APP_ADMIN_URL","result","history","push"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,eAAe,SAASC,cAAT,CAAwBC,kBAAxB,EAA2CC,KAA3C,EAAkD;AAC7D;AAAA;AAAA;AAAA;;AACI,sBAAc;AAAA;;AAAA;;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYH,kBAAZ;AACA;AACA,cAAKI,KAAL,GAAa;AACTC,UAAAA,OAAO,EAAE,IADA;AAETC,UAAAA,QAAQ,EAAE;AAFD,SAAb;AAHU;AAOb;;AARL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAW+BR,KAAK,CAACS,IAAN,CAAWC,OAAO,CAACC,GAAR,CAAYC,mBAAZ,GAAkC,aAA7C,CAX/B;;AAAA;AAWgBC,oBAAAA,MAXhB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,qDAcmB,KAAKV,KAAL,CAAWW,OAAX,CAAmBC,IAAnB,CAAwB,cAAxB,CAdnB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,iCAiBa;AAEL,iBAAO,oBAAC,kBAAD,oBAAwBZ,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAP;AACH;AApBL;;AAAA;AAAA,MAA0BJ,SAA1B;AAAA;AAsBH","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nexport default function AuthMiddleware(ComponentToProtect,props) {\n    return class Test extends Component {\n        constructor() {\n            console.log(ComponentToProtect)\n            super();\n            this.state = {\n                loading: true,\n                redirect: false,\n            };\n        }\n        async componentDidMount() {\n            try {\n                var result = await axios.post(process.env.REACT_APP_ADMIN_URL + '/checktoken')\n            }\n            catch (error) {\n                return this.props.history.push('/admin/login')\n            }\n        }\n        render() {\n\n            return <ComponentToProtect {...props} />\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}